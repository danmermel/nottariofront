---
layout: default
title: Payment Success
---
  <h1>{{ page.title }}</h1>
  <p>We have received your payment and have queued the details of your document for submission to the Ethereum blockchain.</p>
  <p>This process could take a few minutes. You can leave this page open or come back to it at any time. When your submission has been processed we will redirect you to your Notarisation Certificate.</p>
  <p>If you want to <a href="contact.html"> contact us</a>, please make sure you include your submission id below.</p>

  <table  class="table table-striped">
    <tr><th>Submission ID</th><td id="subid"></td></tr>
    <tr><th>Document Name</th><td id="name"></td></tr>
    <tr><th>Submitted to the Blockchain on</th><td id="submitted"></td></tr>
    <tr><th>Blockchain Transaction Id</th><td id="transid"></td></tr>
  </table>
  <div class="text-center">
    <p>Stand by....</p>
    <img src="assets/img/pacman.gif"></img>
  </div>
  <script>
     var id = window.location.search.replace(/^\?/,'')
     console.log(id);
     $('#subid').html(id);
     var action_url = '{{ site.check_lambda }}';
     var poller = function() {
       $.ajax({
         type: 'POST',
         url: action_url,
         data: { id: id },
         error: function(e) {
           console.log('error',e);
         },
         success: function(d) {
           $('#name').html(d.Item.name);
           if(d.Item.submitted_date) {
             $('#submitted').html(new Date(d.Item.submitted_date));
           }
           $('#transid').html(d.Item.eth_transaction_id);
           if(d.Item.stat=="completed") {
             window.location="certificate.html?"+d.Item.eth_contract_id
           } else {
             setTimeout(poller, 5000);
           }
         }
       })
     };

  poller();
  </script>

